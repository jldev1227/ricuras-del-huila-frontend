generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model categorias {
  id          String   @db.Uuid
  nombre      String
  descripcion String?
  icono       String?
  orden       Int      @default(0)
  activo      Boolean  @default(true)
  creado_en   DateTime @default(now())

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model clientes {
  id                     String                @db.Uuid
  nombre                 String
  apellido               String?
  telefono               String?
  correo                 String?
  tipo_identificacion    tipos_identificacion?
  numero_identificacion  String?
  digito_verificacion    String?
  tipo_persona           tipos_persona?
  regimen_fiscal         regimenes_fiscales?
  responsabilidad_fiscal String?
  direccion              String?
  ciudad                 String?
  departamento           String?
  codigo_postal          String?
  notas_especiales       String?
  frecuente              Boolean               @default(false)
  creado_en              DateTime              @default(now())
  actualizado_en         DateTime

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model mesas {
  id              String    @db.Uuid
  numero          Int
  capacidad       Int       @default(4)
  disponible      Boolean   @default(true)
  sucursal_id     String    @db.Uuid
  ubicacion       String?
  notas           String?
  ultima_limpieza DateTime?
  creado_en       DateTime  @default(now())
  actualizado_en  DateTime

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model orden_items {
  id              String  @db.Uuid
  orden_id        String  @db.Uuid
  producto_id     String  @db.Uuid
  cantidad        Int
  precio_unitario Decimal @db.Decimal(10, 2)
  subtotal        Decimal @db.Decimal(10, 2)
  notas           String?

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model ordenes {
  id                   String        @db.Uuid
  mesero_id            String?       @db.Uuid
  total                Decimal       @db.Decimal(10, 2)
  estado               estados_orden @default(PENDIENTE)
  sincronizado         Boolean       @default(false)
  creado_offline       Boolean       @default(false)
  sincronizado_en      DateTime?
  creado_en            DateTime      @default(now())
  actualizado_en       DateTime
  mesa_id              String?       @db.Uuid
  cliente_id           String?       @db.Uuid
  costo_adicional      Decimal?      @db.Decimal(10, 2)
  costo_envio          Decimal?      @db.Decimal(10, 2)
  descuento            Decimal       @default(0) @db.Decimal(10, 2)
  direccion_entrega    String?
  hora_recogida        DateTime?
  indicaciones_entrega String?
  nombre_cliente       String?
  notas                String?
  subtotal             Decimal       @db.Decimal(10, 2)
  telefono_cliente     String?
  tipo_orden           tipos_orden
  especificaciones     String?
  sucursal_id          String        @db.Uuid

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model password_resets {
  id         String   @db.Uuid
  usuario_id String   @db.Uuid
  otp        String
  intentos   Int      @default(0)
  usado      Boolean  @default(false)
  expira_en  DateTime
  creado_en  DateTime @default(now())

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model productos {
  id               String   @db.Uuid
  nombre           String
  descripcion      String?
  precio           Decimal  @db.Decimal(10, 2)
  costo_produccion Decimal  @db.Decimal(10, 2)
  categoria_id     String   @db.Uuid
  imagen           String?
  disponible       Boolean  @default(true)
  destacado        Boolean  @default(false)
  creado_en        DateTime @default(now())
  actualizado_en   DateTime

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model sesiones {
  id             String   @db.Uuid
  usuario_id     String   @db.Uuid
  token          String
  refresh_token  String?
  expira_en      DateTime
  dispositivo_id String?
  ip_address     String?
  user_agent     String?
  activa         Boolean  @default(true)
  ultimo_uso     DateTime @default(now())
  creado_en      DateTime @default(now())

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model sucursales {
  id        String   @db.Uuid
  nombre    String
  direccion String
  telefono  String?
  activo    Boolean  @default(true)
  creado_en DateTime @default(now())

  @@ignore
}

model Usuario {
  id              String    @id @default(uuid()) @db.Uuid
  nombreCompleto  String    @map("nombre_completo")
  identificacion  String    @unique
  correo          String?
  telefono        String?
  password        String
  rol             roles     @default(MESERO)
  activo          Boolean   @default(true)
  ultimaConexion  DateTime? @map("ultima_conexion")
  dispositivoId   String?   @map("dispositivo_id")
  versionCache    Int       @default(1) @map("version_cache")
  creadoEn        DateTime  @default(now()) @map("creado_en")
  actualizadoEn   DateTime  @updatedAt @map("actualizado_en")
  sucursalId      String    @map("sucursal_id") @db.Uuid

  @@map("usuarios")
}

enum estados_orden {
  PENDIENTE
  EN_PREPARACION
  LISTA
  ENTREGADA
  CANCELADA
}

enum regimenes_fiscales {
  SIMPLIFICADO
  COMUN
  GRAN_CONTRIBUYENTE
  NO_RESPONSABLE
}

enum roles {
  ADMINISTRADOR
  MESERO
}

enum tipos_identificacion {
  CC
  CE
  NIT
  TI
  PASAPORTE
  DIE
}

enum tipos_orden {
  LOCAL
  LLEVAR
  DOMICILIO
}

enum tipos_persona {
  NATURAL
  JURIDICA
}
